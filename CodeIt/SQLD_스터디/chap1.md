# 챕터 1

## 용어 정리
- 데이터 베이스 : 데이터의 집합
- DBMS : 데이터를 잘 관리할 수 있도록 만든 것
- 모델링 : 현실 세계의 비즈니스 프로세스와 데이터 요구 사항을 추상적이고 구조화된 형태로 표현하는 과정
- 스키마 : 데이터베이스의 구조와 제약 조건에 관한 전반적인 명세를 기술한 메타데이터의 집합(<span style="color:pink">모든 객체에 대한 정보</span>)

|테이블|엔티티    
|---|---|
|컬럼|속성|   
|행|인스턴스|

---

## 데이터 모델의 이해
### 모델링의 특징
1. 단순화(Simplification) : 불필요한 세부 사항을 제거, **단순하게 쉽게** 표기(복잡하지 않게)
2. 추상화(Abstraction) : **간략**하게 표현
3. 명확화(Clarify) : **정확**하게 현상을 기술
-> 즉, 데이터베이스의 모델링은 '현실 세계를 추상화, 단순화, 명확화하기 위해 일정한 표기법에 의해 표현하는 기법'이다.

### 데이터 모델링 3가지 관점
- 1. 데이터 관점 : 어떤 데이터들이 업무와 얽혀있는지, 데이터간에 어떤 관계?
- 2. 프로세스 관점 : 업무가 실제로 처리하고 있는 일이 무엇인지, 앞으로 처리해야 하는 일
- 3. 데이터와 프로세스 관점 : 프로세스 흐름에 따라서 데이터가 어떤 영향을 받는지

### 데이터 모델링 유의점
- 1. 중복(Duplication) : 같은 데이터가 여러 데이터에 중복 저장되는 것을 지양
- 2. 비유연성(Inflexibility) : 사소한 업무 변화에 대해서도 잦은 모델 변경이 되지 않도록 주의, 데이터 모델과 프로세스를 분리하여 유연성을 높여야 함
- 3. 비일관성(Inconsistency) : 데이터베이스 내의 정보가 모순되거나 상반된 내용 갖는 상태, 데이터 간 상호연관 관계를 명확히 정의 필요

### 데이터 모델링 3가지 요소

|명칭|내용|
|---|---|
|대상(entity)|업무가 관리하고자 하는 대상(객체)|
|속성(atribute)|대상들이 갖는 속성(하나의 특징으로 정의될 수 있는 것)|
|관계(relationship)|대상들 간의 관계|

### 데이터 모델링의 3단계
1. 개념적 모델링
  - 업부 중심적, 포괄적인 수준의 모델링
  - <span style="color:pink">추상화 수준이 가장 높다.</span>
2. 논리적 모델링
  - 개념적 모델링의 결과를 토대로 세부속성, 식별자, 관계 등을 표현하는 단계
  - **데이터 정규화 수행**
3. 물리적 모델링
  - 논리 모델링이 끝나면, 이를 직접 물리적으로 생성하는 과정
  - <span style='color:pink'>추상화 수준은 가장 낮음</span>

### 데이터의 독립성
ANSI-SPARC 아키텍처는 데이터베이스 관리 시스템(DBMS)의 추상적인 설계 표준인데 스키마를 다음과 같이 3단계로 나눈다. 이를 분리하는 목적은 데이터베이스에 대한 사용자들의 관점과 데이터 베이스가 실제로 표현되는 방식을 분리하기 위해서이다.

### 스키마의 3단계 구조
1. 외부 스키마 :
  - <span style='color:pink'><U>사용자가 보는 관점</U></span>에서 데이터베이스 스키마 정의
  - 사용자나 응용 프로그램이 필요한 데이터를 정의
  - 즉, 사용자의 관점!
2. 개념 스키마 :
  - 사용자 관점의 데이터베이스 스키마를 통합하여 <span style='color:pink'><U>데이터베이스의 전체 논리적 구조를 정의</U></span>
  - 전체 데이터베이스의 개체, 속성, 관계, 데이터 타입 등을 정의
  - 즉, 통합된 관점!
3. 내부 스키마 :
  - 데이터가 <span style='color:pink'><U>물리적으로 어떻게 저장되는지를 정의</U></span>
  - 전체 데이터베이스의 개체,속성,관계,데이터 타입 등을 정의

### 3단계 스키마의 독립성
- 독립성 : 어느 한쪽(물리적,논리적) 구조를 변경하더라도 다른 한 쪽에 영향을 주면 안됨
1) 논리적 독립성 : 논리적 데이터 구조가 변경되어도(개념 스키마 변경) 응용 프로그램에 영향을 주지 않는 특성
2) 물리적 독립성 : 물리적인 구조가 변경되더라도(내부 스키마 변경) 개념/외부 스키마에 영향을 주지 않는 특성

### 데이터 모델의 표기법(ERD : Entity Relationship Diagram)
- 엔터티 사이 관계를 시각적으로 표현한 다이어그램을 ERD라고 함
#### ERD 작성 절차(6단계)
1. 엔터티 도출한 후 그림
2. 엔터티 배치
3. 엔터티 간의 관계를 설정
4. 관계명을 서술
5. 관계의 참여도 기술
6. 관계의 필수 여부를 확인

---

## 엔터티
### 엔터티 개념
- 현실 세계에서 독립적으로 식별 가능한 객체,사물
- 분석해야 하는 대상(instance)들로 이루어진 집합
- 인스턴스는 엔터티의 특정한 속성들로 구성됨

예시)
|장난감명|제품번호|제품 카테고리|
|---|---|---|
|레고1|01|레고|
|인형1|02|인형|

-> 장난감이라는 엔터티에 장난감이름,제품번호,카테고리는 각각의 속성을 가지고 있고,
그 중 제품 번호는 각 제품의 고유한 번호이므로 식별자이다. 그리고 레고1에 행을 인스턴스라고 한다.

### 엔터티 특성
1. 유일한 식별자에 의해 식별 가능
2. 해당 업무에 필요하고 관리하고자 하는 정보
3. 인스턴스들의 집합
4. 엔터티는 반드시 속성을 가짐
5. 엔터티는 업무에 프로세스에 의해 사용(필요없으면 제거)
6. 다른 엔터티와 최소 1개 이상의 관계

### 엔터티 분류
<span style='color:pink'> 1) 유형과 무형에 따른 분류 </span>
  - 1. 유형엔터티 : 물리적 형태가 있음(실체가 있음)
  - 2. 개념엔터티 : 물리적인 형태 없음
  - 3. 사건엔터티 : 업무를 수행에 따라 발생하는 엔터티

<span style='color:pink'> 2) 발생 시점에 따른 분류 </span>
  - 1. 기본 엔터티 : 그 업무에 원래 존재하는 정보, 자신의 고유한 주식별자를 가짐
  - 2. 중심 엔터티 : 기본엔터티로부터 발생되고 그 업무에서 중심적인 역할
  - 3. 행위 엔터티 : 2개 이상의 부모엔터티로부터 발생

### 엔터티의 명명
1. 현업에서 사용하는 용어 사용
2. 가능하면 약자 사용은 자제
3. 단수 명사 사용
4. 모든 엔터티에서 유일하게 이름 부여
5. 엔터티 생성 의미대로 이름 부여

### 엔터티와 인스턴스 표기법

![엔터티,인스턴스관계](.\관련사진\엔터티,인스턴스.png) 

---

## 속성
### 속성의 개념
- 업무에서 필요로 하는 고유한 성질,특징을 의미(관찰 대상) -> <span styple='color:pink'> 칼럼 </span>으로 표현할 수 있는 단위
- 업무상 인스턴스로 관리하고자 하는 더 이상 분리되지 않는 최소의 데이터 단위

### 엔터티, 인스턴스, 속성, 속성값의 관계
- 한 개의 엔터티는 2개 이상의 인스턴스
- 한 개의 엔터티는 2개 이상의 속성
- 한 개의 속성은 1개의 속성값값

### 속성의 특징
- 반드시 해당 업무에서 필요
- <U>정해진 주식별자에 함수적 종속성을 가져야 함</U>     
  : 학번(주식별자)가 달라지면 이름도 달라짐
- 하나의 속성은 한 개의 값만을 가져야 함
- 하나의 인스턴스는 속성마다 반드시 하나의 속성값을 가짐
-> 각 속성이 하나의 값을 갖고 있음을 의미(속성의 원자성)

### 원자성이란?
- 데이터모델에서 각 엔티티의 인스턴스가 해당 속성에 대해 단일하고 명확한 값을 가지는 것을 의미 -> **하나의 값**

### 함수적 종속성
- 한 속성의 값이 다른 속성의 값에 종속적인 관계를 갖는 특징을 말함
- 어떤 <U>**속성 A의 값에 의해 다른 속성 B도 유일하게 결정**</U>된다면, B는 A에 함수적으로 종속됐다 하고 A -> B

**1. 완전 함수적 종속**
- 특정 컬럼이 기본키에 대해 완전히 종속될 때
- PK를 구성하는 컬럼이 2개 이상일 경우 PK 값 모두에 의한 종속관계를 나타낼 때 완전 함수 종속성 만족

**2. 부분 함수적 종속**
- 기본키 전체가 아닌, 일부에 대해서 종속될 때

### 속성의 분류
<span style = 'color:pink'>**1) 속성의 특성에 따른 분류** </span>
1. 기본 속성
  - 업무로부터 추출된 모든 속성
2. 설계 속성
  - 기본 속성 외에 업무를 규칙화하기 위해 새로 만들어지거나 속성을 변형하여 만들어지는 속성
  - 어떤 구분을 위해 번호를 붙이는 경우 해당당
3. 파생 속성
  - 다른 속성에 의해 만들어지는 속성
  - 일반적으로 계산된 값들이 해당됨

<span style = 'color:pink'>**2) 엔티티 구성방식에 따른 분류** </span>
1. PK(primary key, 기본키) 
  - 인스턴스를 식별할 수 있는 속성
2. FK(foreign key, 외래키)
  - 다른 엔티티와의 관계에서 포함된 속성
3. 일반 속성
  - 엔티티에 포함되어 있고 PK,FK에 포함되지 않는 속성

<span style = 'color:pink'>**3) 분해 여부에 따른 분류** </span>
1. 단일 속성
  - 하나의 의미로 구성된 경우
2. 복합 속성
  - 여러 개의 의미로 구성된 경우
3. 다중값 속성
  - 속성에 여러 개의 값을 가질 수 있는 경우
  - 다중값 속성은 엔티티로 분해

### 속성의 몀명규칙
1. 해당 업무에서 사용하는 이름을 부여
2. 서술식 속성명은 사용x
3. 약어의 사용은 가급적 제한
4. 전체 데이터 모델에서 유일한 명칭

### 도메인(Domain)
- 도메인은 <u>각 속성이 가질 수 있는 값</u>을 의미
- 엔티티 내에서 속성에 대한 데이터 타입과 크기, 제약사항을 저장

### 관계(realtionship)의 개념
- <U>**관계는 엔티티 간의 연관성을 나타낸 개념**</U>
- 관계를 정의할 때는 인스턴스(각 행 데이터)간의 논리적인 연관성을 파악하여 정의
- 엔티티를 어떻게 정의하느냐에 따라 변경되기도 함

### 관계의 종류
1) 존재적 관계 
  - 한 엔티티의 존재가 다른 엔티티 존재에 영향을 미치는 관계
  - 엔티티 간의 연관된 상태
  ex) 학과 엔티티가 삭제 -> 학생 엔티티 존재 영향

2) 행위적 관계
  - 엔티티 간의 어떤 행위가 있는 것을 의미
  ex) 고객 엔티티 행동에 의해 주문 엔티티 발생

> <U>*ERD에서는 존재관계와 행위관곌를 구분하지 않음</U>

### 관계의 구성
1. 관계명
2. 차수
3. 선택성

### 관계의 차수
**- <U>한 엔티티의 인스턴스가 다른 엔티티의 인스턴스와 어떻게 연결되는지를 나타내는 표현</U>**
- 주로 1:1, 1:N, N:M 등으로 표현

1) **1 대 1 관계**
  - 완전 1 대 1 관계
    - 하나의 엔티티(사원)에 관계되는 엔티티가 반드시 하나로 존재(부서)
  - 선택적 1 대 1 관계
    - 하나의 엔티티(사원)에 관계되는 엔티티가 하나이거나 없을 수 있는 경우(발령나지 않아 없는 경우)

2) **1대 N 관계**
- 엔티티(고객)에 하나의 행에 다른 엔티티의 값이 여러 개 있는 경우(여러 계좌)

3) **M대 N 관계**
- 두 엔티티가 다대다의 연결 관계 가지고 있음(학생이 여러 강의를 듣고 강의는 여러 학생을 보유 가능)
- 이 경우 조인 시 카테시안 곱(M*N)이 발생하므로 **<U>
두 엔티티를 연결하는 연결엔티티의 추가로 1 대 N 관계로 해소할 필요가 있음</U>**

### 관계의 페어링
- 엔티티 안에 인스턴스가 개별적으로 관계를 가지는 것
- 관계란 페어링의 집합

#### 관계와 차수,페어링 차이
- 학생과 강의 엔티티는 관계를 가짐
- 한 학생은 여러 강의를 수강할 수 있으며, 강의는 여러 학생들을 보유할 수 있기에 M:N 관계가 됨
- 인스턴스의 관계를 보면 '학생 A가 강의 B를 2023년 1학기에 수강했고 성적은 A+를 받았다'와 같은 특정한 페어링이 형성
><U><span style ='color:pink'>관계의 차수는</span> 하나의 엔티티와 다른 엔티티 간의 레코드 연결 방식을 나타내는 반면 <span style ='color:pink'>페어링</span>은 두 엔티티 간의 특정 연결 설명 및 추가 정보 제공</U>

---

### 식별자
#### 식별자 개념
- 하나의 엔티티에 구성된 여러 속성 중 **엔티티를 대표할 수 있는 속성**
- 하나의 유일한 식별자 존재
- 식별자는 논리 모델링에서 사용, 키는 물리 모델링

### 주식별자 특징
1. 유일성 : 주식별자에 의해 유일하게 구분
2. 최소성 : 주직별자를 구성하는 속성은 유일성을 만족하는 최소한의 속성으로 구성
3. 불변성 : 주식별자가 특정 엔터티에 지정되면 그 식별자 값은 변하면 안 됨
4. 존재성 : 주식별자가 지정되면 반드시 값이 존재해야 하며 NULL은 허용 안 됨

### 식별자 분류
1) 대표성 여부에 따른 구분

|주식별자|보조식별자|
|---|---|
|- 유일성과 최소성을 만족하며 엔티티 대표하는 식별자|- 엔티티 내에서 각 인스턴스를 구분할 수 있는 구분자, 대표성을 가지지 못함|
|- 엔티티 내에서 각 인스턴스를 유일하게 구분할 수 있는 식별자|- 유일성과 최소성은 만족하지만 대표성을 만족하지 못하는 식별자|
|타 엔티티와 참조관계 연결 가능한 식별자| |

2) 생성 여부에 따른 식별자의 종류

|내부 식별자|외부 식별자|
|---|---|
|엔티티 내부에서 스스로 생성되는 식별자|다른 엔티티와 관계로 만들어지는 식별자(외래키)|

3) 속성 수에 따른 식별자 종류

|단일 식별자|복합 식별자|
|---|---|
|하나의 속성|2개 이상의 속성|

4) 대체 여부에 따른 식별자의 종류

|본질식별자(원조식별자)|인조식별자|
|---|---|
|비즈니스 프로세스에서 만들어지는 식별자|인위적으로 만들어지는 식별자|
| |자동 증가하는 일련번호 같은 형태|

### 주식별자 도출기준
1) 해당 업무에서 자주 이용되는 속성을 주식별자로 지정
2) 명칭이나 내역등과 같은 이름은 피함
3) 속성의 수를 최대한 적게 구성

### 관계간 엔티티 구분
1) 강한 개체
  - 독립적으로 존재할 수 있는 엔티티
2) 약한 개체
  - 독립적으로 존재할 수 없는 엔티티

### 식별 관계와 비식별관계(중요!)
1) 식별 관계 :
  - 하나의 엔티티의 기본키를 다른 엔티티가 기본키의 하나로 공유하는 관계
  - 식별관계는 ERD에서 실선으로 표시
2) 비식별관계
  - 강한 개체의 기본키를 다른 엔티티의 기본키가 아닌 일반 속성으로 관계를 가지는 것
  - ERD에선 점선으로 표시

### KEY의 종류
1. 기본키(primary key) : 엔티티를 대표할 수 있는 키
2. 후보키(candidate key) : 유일성과 최소성을 만족하는 키
> 후보키 중 하나가 기본키가 되고 나머지를 대체키라고 부름
3. 슈퍼키(super key) : 유일성은 만족하지만 최소성은 만족하지 않는 키
4. 대체키(alternate key) : 여러 후보키 중 기본키가 아닌 키
5. 외래키(foreign key) : 다른 테이블의 기본키를 참조하는 키
